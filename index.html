<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion - TechnoWeb GPS</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/nav_footer.css">
    <link href="https://fonts.googleapis.com/css2?family=Reeya&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.2.0/css/line.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/6.6.6/css/flag-icons.min.css">
  <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <nav>
      <div class="nav_container">
         <a href="#" class="logo">
            carTracker 
            <i data-lucide="map-pin"></i> 
         </a>
         
         <ul class="nav_menu">
            <li><a href="index.html" class="nav_col a">Home </a></li>
            <li><a href="consultance.html" class="nav_col">Services </a></li>
            <li><a href="construction.html" class="nav_col ">A propos </a></li>
            <li><a href="contact.html" class="nav_col">Contact </a></li>
         </ul>
         
         <button id="open-menu-btn">
            <i class="uil uil-bars"></i>
         </button>
         <button id="close-menu-btn">
            <i class="uil uil-multiply"></i>
         </button>
      </div>
   </nav>
    <div class="auth-body">
    <div class="auth_left">
        <h2>Bienvenue sur</h2>
        <h1>CarTracker</h1>
        <p>Votre solution de suivi GPS en temps réel</p>
        <div class="auth_buttons">
            <button class="btn">En savoir plus</button>
            <button class="btn">Contactez-nous</button>
        </div>
    </div>
    <div class="auth-container">
        <div class="auth-card">
            <!-- Login Form -->
            <form id="loginForm" class="auth-form">
                <h2>Connexion</h2>
                
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required placeholder="votre@email.com">
                </div>

                <div class="form-group">
                    <label for="loginPassword">Mot de passe</label>
                    <input type="password" id="loginPassword" required placeholder="••••••••">
                </div>

                <div id="loginError" class="error-message" style="display: none;"></div>

                <button type="submit" class="btn btn-primary">
                    <span id="loginBtnText">Se connecter</span>
                    <span id="loginLoader" class="loader" style="display: none;"></span>
                </button>

                <p class="auth-switch">
                    Pas encore de compte ? 
                    <a href="#" id="showRegister">Créer un compte</a>
                </p>
            </form>

            <!-- Register Form -->
            <form id="registerForm" class="auth-form" style="display: none;">
                <h2>Créer un compte</h2>
                
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" required placeholder="votre@email.com">
                </div>

                <div class="form-group">
                    <label for="registerPassword">Mot de passe</label>
                    <input type="password" id="registerPassword" required placeholder="••••••••" minlength="6">
                    <small>Minimum 6 caractères</small>
                </div>

                <div class="form-group">
                    <label for="registerPasswordConfirm">Confirmer le mot de passe</label>
                    <input type="password" id="registerPasswordConfirm" required placeholder="••••••••">
                </div>

                <div id="registerError" class="error-message" style="display: none;"></div>

                <button type="submit" class="btn btn-primary">
                    <span id="registerBtnText">Créer mon compte</span>
                    <span id="registerLoader" class="loader" style="display: none;"></span>
                </button>

                <p class="auth-switch">
                    Déjà un compte ? 
                    <a href="#" id="showLogin">Se connecter</a>
                </p>
            </form>
        </div>
    </div>
    </div>
    <div class="block">
        <h3>
            Qui sommes-nous ? 
            <i data-lucide="badge-info"></i>
        </h3>
        <p>TechnoWeb GPS est une entreprise spécialisée dans les solutions de suivi GPS pour véhicules. Nous offrons des services innovants pour assurer la sécurité et la gestion efficace de votre flotte.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Expedita suscipit corporis eum at minus voluptas laborum? Dolorum, sequi. Ad tempore asperiores odio quo, repudiandae nihil fugit mollitia excepturi dignissimos nemo. Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum maxime repellat eligendi velit cumque, dignissimos commodi expedita necessitatibus! Corrupti perferendis nostrum at perspiciatis nesciunt repellendus. Quis odio doloremque perspiciatis incidunt.</p>
    </div>
    <div class="block">
        <h3>
            Nos services
            <i data-lucide="settings"></i>
        </h3>
        <p>Découvrez nos solutions adaptées à vos besoins pour optimiser la gestion de votre flotte et assurer la sécurité de vos véhicules.</p>
        <ul>
            <li>Suivi en temps réel des véhicules</li>
            <li>Alertes de sécurité personnalisées</li>
            <li>Rapports détaillés sur les trajets</li>
            <li>Gestion de flotte simplifiée</li>
        </ul>
    </div>
    <div class="block">
        <h3>
            Notre vision
            <i data-lucide="eye"></i>
        </h3>
        <p>Chez TechnoWeb GPS, nous croyons en l'innovation continue pour offrir les meilleures solutions de suivi GPS. Notre objectif est de devenir le leader du marché en fournissant des services fiables et performants.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, quod. Harum, reiciendis! Quisquam, quod. Harum, reiciendis! Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, quod. Harum, reiciendis! Quisquam, quod. Harum, reiciendis!</p>
    </div>
    <div class="block">
        <h3>
            Notre équipe
            <i data-lucide="users"></i>
        </h3>
        <p>Rencontrez les experts passionnés derrière TechnoWeb GPS, dédiés à fournir des solutions de suivi GPS de qualité supérieure.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, quod. Harum, reiciendis! Quisquam, quod. Harum, reiciendis! Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, quod. Harum, reiciendis! Quisquam, quod. Harum, reiciendis!</p>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <!-- Custom Scripts -->
    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/simple.js"></script>

    <script>
        // Toggle between login and register forms
        document.getElementById('showRegister').addEventListener('click', (e) => {
            e.preventDefault();
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'block';
        });

        document.getElementById('showLogin').addEventListener('click', (e) => {
            e.preventDefault();
            document.getElementById('registerForm').style.display = 'none';
            document.getElementById('loginForm').style.display = 'block';
        });

        // Handle Login
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const errorDiv = document.getElementById('loginError');
            const btnText = document.getElementById('loginBtnText');
            const loader = document.getElementById('loginLoader');

            // Show loader
            btnText.style.display = 'none';
            loader.style.display = 'inline-block';
            errorDiv.style.display = 'none';

            try {
                await firebase.auth().signInWithEmailAndPassword(email, password);
                // Redirect handled by auth state observer
            } catch (error) {
                errorDiv.textContent = getErrorMessage(error.code);
                errorDiv.style.display = 'block';
                btnText.style.display = 'inline';
                loader.style.display = 'none';
            }
        });

        // Handle Register
        document.getElementById('registerForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerPasswordConfirm').value;
            const errorDiv = document.getElementById('registerError');
            const btnText = document.getElementById('registerBtnText');
            const loader = document.getElementById('registerLoader');

            // Check password match
            if (password !== confirmPassword) {
                errorDiv.textContent = 'Les mots de passe ne correspondent pas.';
                errorDiv.style.display = 'block';
                return;
            }

            // Show loader
            btnText.style.display = 'none';
            loader.style.display = 'inline-block';
            errorDiv.style.display = 'none';

            try {
                await firebase.auth().createUserWithEmailAndPassword(email, password);
                // Redirect handled by auth state observer
            } catch (error) {
                errorDiv.textContent = getErrorMessage(error.code);
                errorDiv.style.display = 'block';
                btnText.style.display = 'inline';
                loader.style.display = 'none';
            }
        });

        function getErrorMessage(code) {
            switch (code) {
                case 'auth/email-already-in-use':
                    return 'Cet email est déjà utilisé.';
                case 'auth/invalid-email':
                    return 'Email invalide.';
                case 'auth/weak-password':
                    return 'Mot de passe trop faible.';
                case 'auth/user-not-found':
                    return 'Utilisateur introuvable.';
                case 'auth/wrong-password':
                    return 'Mot de passe incorrect.';
                default:
                    return 'Une erreur est survenue. Veuillez réessayer.';
            }
        }
    </script>
    <!-- Initialize Lucide Icons -->
    <script>
        lucide.createIcons();
    </script>
</body>
</html>